<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_17) on Mon Apr 26 17:56:00 CEST 2010 -->
<TITLE>
MeasurementHistoryController
</TITLE>

<META NAME="date" CONTENT="2010-04-26">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MeasurementHistoryController";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../fws_master/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MeasurementHistoryController.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../fws_master/MeasurementHistoryEntry.html" title="class in fws_master"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?fws_master/MeasurementHistoryController.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MeasurementHistoryController.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
fws_master</FONT>
<BR>
Class MeasurementHistoryController</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>fws_master.MeasurementHistoryController</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>MeasurementHistoryController</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class handles the collection of HistoryValues. It has two collections one for recent history an one for the history of the last year.
 For each Station and each Parameter both histories are saved.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Johannes Kasberger</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.HashMap&lt;java.lang.String,<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#lastHours">lastHours</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.HashMap&lt;java.lang.String,<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#lastYear">lastYear</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#MeasurementHistoryController()">MeasurementHistoryController</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Class Constructor</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#addData(java.lang.String, java.lang.String, java.util.Vector)">addData</A></B>(java.lang.String&nbsp;station,
        java.lang.String&nbsp;parameter,
        java.util.Vector&lt;<A HREF="../fws_master/Measurement.html" title="class in fws_master">Measurement</A>&gt;&nbsp;data)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds the measurements to the recent history</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#changeDay(java.lang.String, java.lang.String, fws_master.HistoryFunctions, java.util.Date)">changeDay</A></B>(java.lang.String&nbsp;station,
          java.lang.String&nbsp;parameter,
          <A HREF="../fws_master/HistoryFunctions.html" title="enum in fws_master">HistoryFunctions</A>&nbsp;historyFunction,
          java.util.Date&nbsp;oldDate)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Is called when the day has changed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#generateKey(java.lang.String, java.lang.String)">generateKey</A></B>(java.lang.String&nbsp;station,
            java.lang.String&nbsp;parameter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate the Key for the HashMap</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#getLastHistory(java.lang.String, java.lang.String, int)">getLastHistory</A></B>(java.lang.String&nbsp;station,
               java.lang.String&nbsp;parameter,
               int&nbsp;hours)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the measurement that are max hours hours old</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../fws_master/MeasurementHistoryController.html#getLastHistoryDays(java.lang.String, java.lang.String, int)">getLastHistoryDays</A></B>(java.lang.String&nbsp;station,
                   java.lang.String&nbsp;parameter,
                   int&nbsp;days)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get values of the last days</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="lastHours"><!-- --></A><H3>
lastHours</H3>
<PRE>
private java.util.HashMap&lt;java.lang.String,<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A>&gt; <B>lastHours</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="lastYear"><!-- --></A><H3>
lastYear</H3>
<PRE>
private java.util.HashMap&lt;java.lang.String,<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A>&gt; <B>lastYear</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MeasurementHistoryController()"><!-- --></A><H3>
MeasurementHistoryController</H3>
<PRE>
public <B>MeasurementHistoryController</B>()</PRE>
<DL>
<DD>Class Constructor
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="addData(java.lang.String, java.lang.String, java.util.Vector)"><!-- --></A><H3>
addData</H3>
<PRE>
public void <B>addData</B>(java.lang.String&nbsp;station,
                    java.lang.String&nbsp;parameter,
                    java.util.Vector&lt;<A HREF="../fws_master/Measurement.html" title="class in fws_master">Measurement</A>&gt;&nbsp;data)</PRE>
<DL>
<DD>Adds the measurements to the recent history
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>station</CODE> - Name of the Station of which the measurements are<DD><CODE>parameter</CODE> - Name of the Parameter<DD><CODE>data</CODE> - Vector of Measurements</DL>
</DD>
</DL>
<HR>

<A NAME="getLastHistory(java.lang.String, java.lang.String, int)"><!-- --></A><H3>
getLastHistory</H3>
<PRE>
public <A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A> <B>getLastHistory</B>(java.lang.String&nbsp;station,
                                         java.lang.String&nbsp;parameter,
                                         int&nbsp;hours)</PRE>
<DL>
<DD>Gets the measurement that are max hours hours old
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>station</CODE> - <DD><CODE>parameter</CODE> - <DD><CODE>hours</CODE> - maximum age of measurements
<DT><B>Returns:</B><DD>History of values</DL>
</DD>
</DL>
<HR>

<A NAME="getLastHistoryDays(java.lang.String, java.lang.String, int)"><!-- --></A><H3>
getLastHistoryDays</H3>
<PRE>
public <A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master">MeasurementHistory</A> <B>getLastHistoryDays</B>(java.lang.String&nbsp;station,
                                             java.lang.String&nbsp;parameter,
                                             int&nbsp;days)</PRE>
<DL>
<DD>Get values of the last days
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>station</CODE> - <DD><CODE>parameter</CODE> - <DD><CODE>days</CODE> - age in days of the values
<DT><B>Returns:</B><DD>History of values</DL>
</DD>
</DL>
<HR>

<A NAME="changeDay(java.lang.String, java.lang.String, fws_master.HistoryFunctions, java.util.Date)"><!-- --></A><H3>
changeDay</H3>
<PRE>
public void <B>changeDay</B>(java.lang.String&nbsp;station,
                      java.lang.String&nbsp;parameter,
                      <A HREF="../fws_master/HistoryFunctions.html" title="enum in fws_master">HistoryFunctions</A>&nbsp;historyFunction,
                      java.util.Date&nbsp;oldDate)</PRE>
<DL>
<DD>Is called when the day has changed. The representing value for the oldDate is calculated and saved to the long term history.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>station</CODE> - <DD><CODE>parameter</CODE> - <DD><CODE>historyFunction</CODE> - <DD><CODE>oldDate</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="generateKey(java.lang.String, java.lang.String)"><!-- --></A><H3>
generateKey</H3>
<PRE>
private java.lang.String <B>generateKey</B>(java.lang.String&nbsp;station,
                                     java.lang.String&nbsp;parameter)</PRE>
<DL>
<DD>Generate the Key for the HashMap
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>station</CODE> - <DD><CODE>parameter</CODE> - 
<DT><B>Returns:</B><DD>key for HashMap</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../fws_master/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MeasurementHistoryController.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../fws_master/MeasurementHistory.html" title="class in fws_master"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../fws_master/MeasurementHistoryEntry.html" title="class in fws_master"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?fws_master/MeasurementHistoryController.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MeasurementHistoryController.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
